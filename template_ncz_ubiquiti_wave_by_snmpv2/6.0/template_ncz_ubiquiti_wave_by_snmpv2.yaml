zabbix_export:
  version: '6.0'
  date: '2024-12-06T18:47:42Z'
  groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: c41e592bd66645058578dd6a3a87a3b2
      template: 'NCZ Ubiquiti Wave by SNMPv2'
      name: 'NCZ Ubiquiti Wave by SNMPv2'
      description: |
        Template for monitoring Ubiquiti Wave 5/60GHz Wireless Link equipment. 
        
        Tested with Zabbix 6.0, Ubiquiti Wave-AP and Wave-Nano
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: ebf3ee9c15f545ce909325d653ebb8a3
          name: 'ICMP Ping'
          type: SIMPLE
          key: icmpping
          delay: 30s
          history: 7d
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: network
          triggers:
            - uuid: e837b9b5d5bb4a55befa6720a9e93dcd
              expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/icmpping,30s)=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
              description: |
                Last value: {ITEM.LASTVALUE1}.
                Last three attempts returned timeout.  Please check device connectivity.
              tags:
                - tag: scope
                  value: availability
        - uuid: 7456b3fcc48449dfb01278950d835acf
          name: 'ICMP Loss'
          type: SIMPLE
          key: icmppingloss
          delay: 30s
          history: 7d
          value_type: FLOAT
          units: '%'
          username: Admin
          password: 'sf4k^M4*O4IvO'
          tags:
            - tag: component
              value: network
          triggers:
            - uuid: e119a5fbf527456abc1971720211c23e
              expression: 'min(/NCZ Ubiquiti Wave by SNMPv2/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/NCZ Ubiquiti Wave by SNMPv2/icmppingloss,5m)<100'
              name: 'High ICMP ping loss'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
              dependencies:
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/icmpping,30s)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 44defb58745946cd9290e03e6eb97d37
          name: 'ICMP Response'
          type: SIMPLE
          key: icmppingsec
          delay: 30s
          history: 7d
          value_type: FLOAT
          units: s
          password: 'sf4k^M4*O4IvO'
          tags:
            - tag: component
              value: network
          triggers:
            - uuid: 8f69171db300439a83a80f95ee1613a6
              expression: 'avg(/NCZ Ubiquiti Wave by SNMPv2/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
              dependencies:
                - name: 'High ICMP ping loss'
                  expression: 'min(/NCZ Ubiquiti Wave by SNMPv2/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/NCZ Ubiquiti Wave by SNMPv2/icmppingloss,5m)<100'
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/icmpping,30s)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: d78b87cb203a4c5d9fdeb36a1bee68a4
          name: 'Radio: Channel Width'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.41112.1.11.1.1.3.1
          key: radio.ubntChanWidth
          delay: 15m
          history: 14d
          units: Hz
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1000000'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: radio
        - uuid: b558dd57d74740fbba188f50e8aa7184
          name: 'Radio: Frequency'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.1.2.1
          key: radio.ubntRadioFreq
          history: 14d
          units: Hz
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1000000'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: radio
          triggers:
            - uuid: c66dc0a8517043fbb47f6d0661651077
              expression: 'change(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntRadioFreq)<>0'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'changecount(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntRadioFreq,3600)=0'
              name: 'Radio: Wireless Frequency has changed'
              opdata: 'New Frequency: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'Will recover after an hour with no further channel changes'
              type: MULTIPLE
              manual_close: 'YES'
              dependencies:
                - name: '{HOST.NAME} has been restarted'
                  expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/system.uptime[sysUpTime])<10m'
              tags:
                - tag: scope
                  value: notice
        - uuid: 66a8713fb14049228ef8e34554dfd5ab
          name: 'Radio: SSID'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.1.4.1
          key: radio.ubntRadioSSID
          delay: 15m
          history: 14d
          trends: '0'
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: radio
        - uuid: 07fcf2428a3b4df485d4c89441a3f823
          name: 'Radio: Role'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.1.1.1
          key: radio.ubntRole
          delay: 15m
          history: 14d
          valuemap:
            name: ubntRadioRole
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: device
            - tag: component
              value: radio
        - uuid: 14ac92673db04614954a4ab4831759fe
          name: 'Device contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: system.contact
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43200'
          tags:
            - tag: component
              value: device
        - uuid: 666c90550fd94812b029d16263f72b8d
          name: 'CPU Utilization (5min)'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.10.1.3.2
          key: 'system.cpu.util[5m]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: '5 minute load average of processor load.'
          tags:
            - tag: component
              value: cpu
          triggers:
            - uuid: 0a3c4fd228c3476c99cb20e2186a4229
              expression: 'avg(/NCZ Ubiquiti Wave by SNMPv2/system.cpu.util[5m],5m)>{$CPU_UTIL_MAX}'
              name: 'High CPU utilization'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 131c0b6c950548759f4fad8dcb4081da
          name: 'Device description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: system.descr
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity.  This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          inventory_link: HARDWARE
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43200'
          tags:
            - tag: component
              value: device
        - uuid: fa6e90d2e6064e298257a17517dc589b
          name: 'Device location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: system.location
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43200'
          tags:
            - tag: component
              value: device
        - uuid: d03d018bfb8e4be885e258b6d4a05eb1
          name: 'Device model'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.2.2.1
          key: system.model
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: MODEL
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43000'
          tags:
            - tag: component
              value: device
        - uuid: ed50575c26ed42eabc80061db6aebc69
          name: 'Device name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: system.name
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43000'
          tags:
            - tag: component
              value: device
        - uuid: 10badb5a35984e04af0c28ea337441fd
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.2.0
          key: system.objectid
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '43000'
          tags:
            - tag: component
              value: device
        - uuid: 3f8a19704cf34fa1b665283151f9fc78
          name: 'Device uptime'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'system.uptime[sysUpTime]'
          delay: 30s
          history: 7d
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: device
          triggers:
            - uuid: 379b54c8e7b54b6eb4d382583bf47fc8
              expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/system.uptime[sysUpTime])<10m'
              name: '{HOST.NAME} has been restarted'
              priority: WARNING
              description: |
                Last value: {ITEM.LASTVALUE1}.
                The device uptime is less than 10 minutes
              manual_close: 'YES'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/zabbix[host,snmp,available],{$SNMP_TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
        - uuid: 03218f94f8ff43a984eac2850a646bc7
          name: 'GPS Altitude'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.4.5.1
          key: ubntGpsAltMeters
          delay: 15m
          history: 7d
          value_type: FLOAT
          units: m
          description: 'GPS Altitude (m)'
          tags:
            - tag: component
              value: gps
        - uuid: 70211b54a8a349b4a4eea6325b788686
          name: 'GPS Latitude'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.4.3.1
          key: ubntGpsLat
          delay: 15m
          history: 7d
          value_type: FLOAT
          description: 'GPS Latitude'
          inventory_link: LOCATION_LAT
          tags:
            - tag: component
              value: gps
        - uuid: 8f7a0d6fa43d4dea905abe503ceaf9a3
          name: 'GPS Longitude'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.4.4.1
          key: ubntGpsLon
          delay: 15m
          history: 7d
          value_type: FLOAT
          description: 'GPS Longitude'
          inventory_link: LOCATION_LON
          tags:
            - tag: component
              value: gps
        - uuid: 35479717a4624653b477efef7d33ceca
          name: 'Orientation Roll'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.5.2.1
          key: ubntOrientationRoll
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'GPS Longitude'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: gps
          triggers:
            - uuid: bc4f3738380b4a51a48e98d63b25a5cb
              expression: 'abs(change(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationRoll))>{$ROLL_WARN}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '(max(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationRoll,3600)-min(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationRoll,3600))<{$ROLL_WARN}'
              name: 'Device roll has changed by more than {$ROLL_WARN} degrees'
              priority: WARNING
              description: 'Will recover after an hour with no further changes'
              manual_close: 'YES'
              dependencies:
                - name: '{HOST.NAME} has been restarted'
                  expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/system.uptime[sysUpTime])<10m'
              tags:
                - tag: scope
                  value: notice
        - uuid: df9e2f802901449c88fbc9736cb8da61
          name: 'Orientation Tilt'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.41112.1.11.1.5.1.1
          key: ubntOrientationTilt
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'GPS Longitude'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: gps
          triggers:
            - uuid: 2d0bf62475c24ba499ef2027ba03cb0d
              expression: 'abs(change(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationTilt))>{$TILT_WARN}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '(max(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationTilt,3600)-min(/NCZ Ubiquiti Wave by SNMPv2/ubntOrientationTilt,3600))<{$TILT_WARN}'
              name: 'Device tilt has changed by more than {$TILT_WARN} degrees'
              priority: WARNING
              description: 'Will recover after an hour with no further changes'
              manual_close: 'YES'
              dependencies:
                - name: '{HOST.NAME} has been restarted'
                  expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/system.uptime[sysUpTime])<10m'
              tags:
                - tag: scope
                  value: notice
        - uuid: 466723e63c2443b486a806d483a6a9b3
          name: 'Available Memory'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.4.6.0
          key: 'vm.memory[free]'
          delay: 5m
          history: 7d
          units: B
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1024'
          tags:
            - tag: component
              value: memory
        - uuid: d7c77f0a274b48b9aa85edd3aea1e6e9
          name: 'Total Memory'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.4.5.0
          key: 'vm.memory[total]'
          delay: 5m
          history: 7d
          units: B
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1024'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: memory
        - uuid: cbf1f175d05d4fe8a765dc9acc8876c1
          name: 'Memory Utilization'
          type: CALCULATED
          key: 'vm.memory[used]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          params: '((last(//vm.memory[total])-last(//vm.memory[free]))/last(//vm.memory[total]))*100'
          tags:
            - tag: component
              value: memory
          triggers:
            - uuid: b023a2f9bb084e00916dca1fd734df97
              expression: 'avg(/NCZ Ubiquiti Wave by SNMPv2/vm.memory[used],5m)>{$MEMORY_UTIL_MAX}'
              name: 'High memory utilization'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 193e293cd31d4936a2047b2c52228466
          name: 'SNMP availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          trends: '0'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - '3600'
          tags:
            - tag: component
              value: network
          triggers:
            - uuid: 25e36508d2724d3fb5d4ecda33db7612
              expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/zabbix[host,snmp,available],{$SNMP_TIMEOUT})=0'
              name: 'No SNMP data collection'
              priority: WARNING
              description: |
                Last value: {ITEM.LASTVALUE1}.
                SNMP is not available for polling. Please check device connectivity and SNMP settings.
              dependencies:
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/icmpping,30s)=0'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: ccb0c8dab77a4166a92afa420ae5339c
          name: 'Network Interfaces Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.2.2.1.2,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#IFTYPE},1.3.6.1.2.1.2.2.1.3]'
          key: net.if.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFADMINSTATUS}'
                value: (1|3)
                formulaid: A
              - macro: '{#IFOPERSTATUS}'
                value: (1|2|3|4|5|7)
                formulaid: D
              - macro: '{#IFNAME}'
                value: '@Network interfaces for discovery'
                formulaid: C
              - macro: '{#IFDESCR}'
                value: airview1
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovering interfaces from IF-MIB'
          item_prototypes:
            - uuid: 2e1f5567f6684602a1b6f62c23c11349
              name: 'Interface {#IFDESCR}: Inbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}'
              key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of inbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: bb9bd84794014274bedb363af98836ce
              name: 'Interface {#IFDESCR}: Inbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of inbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: 86da32b4ab774b1cb64192a984cbcc9b
              name: 'Interface {#IFDESCR}: Bits received'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}'
              key: 'net.if.in[ifInOctets.{#SNMPINDEX}]'
              history: 30d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets received on the interface,including framing characters. Discontinuities in the value of this counter can occurat re-initialization of the management system, and atother times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: 93761c048d704222b59a24728076a540
              name: 'Interface {#IFDESCR}: Outbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}'
              key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of outbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: 0c5a3f9369ee4ec4a6383af1cf9f631c
              name: 'Interface {#IFDESCR}: Outbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of outbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of outbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: 1cf39cf8ab484523933179e6ebef2aa4
              name: 'Interface {#IFDESCR}: Bits sent'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}'
              key: 'net.if.out[ifOutOctets.{#SNMPINDEX}]'
              history: 30d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets transmitted out of the interface, including framing characters. Discontinuities in the value of this counter can occurat re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
            - uuid: 279ff6c9f6c04932bf6f868adb9f51ad
              name: 'Interface {#IFDESCR}: Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.5.{#SNMPINDEX}'
              key: 'net.if.speed[ifSpeed.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              units: bps
              description: |
                MIB: IF-MIB
                An estimate of the interface's current bandwidth in bits per second.
                For interfaces which do not vary in bandwidth or for those where no accurate estimation can be made,
                this object should contain the nominal bandwidth.
                If the bandwidth of the interface is greater than the maximum value reportable by this object then
                this object should report its maximum value (4,294,967,295) and ifHighSpeed must be used to report the interace's speed.
                For a sub-layer which has no concept of bandwidth, this object should be zero.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - '3600'
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFDESCR}'
          trigger_prototypes:
            - uuid: ff7cb046a5d44f58866d73f08340ed3a
              expression: |
                (avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.in[ifInOctets.{#SNMPINDEX}],15m)>({$IF_UTIL_MAX}/100)*last(/NCZ Ubiquiti Wave by SNMPv2/net.if.speed[ifSpeed.{#SNMPINDEX}]) or
                avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.out[ifOutOctets.{#SNMPINDEX}],15m)>({$IF_UTIL_MAX}/100)*last(/NCZ Ubiquiti Wave by SNMPv2/net.if.speed[ifSpeed.{#SNMPINDEX}])) and
                last(/NCZ Ubiquiti Wave by SNMPv2/net.if.speed[ifSpeed.{#SNMPINDEX}])>0
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.in[ifInOctets.{#SNMPINDEX}],15m)<(({$IF_UTIL_MAX}-3)/100)*last(/NCZ Ubiquiti Wave by SNMPv2/net.if.speed[ifSpeed.{#SNMPINDEX}]) and
                avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.out[ifOutOctets.{#SNMPINDEX}],15m)<(({$IF_UTIL_MAX}-3)/100)*last(/NCZ Ubiquiti Wave by SNMPv2/net.if.speed[ifSpeed.{#SNMPINDEX}])
              name: 'Interface {#IFDESCR}: High bandwidth usage >{$IF_UTIL_MAX:"{#IFNAME}"}%'
              opdata: 'Last value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: capacity
            - uuid: 5d1c507be49540248a58439848bf763b
              expression: |
                avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)>{$IF_ERRORS_WARN}
                or avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)>{$IF_ERRORS_WARN}
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)<{$IF_ERRORS_WARN}*0.8
                and avg(/NCZ Ubiquiti Wave by SNMPv2/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)<{$IF_ERRORS_WARN}*0.8
              name: 'Interface {#IFDESCR}: High error rate'
              opdata: 'Last value: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Recovers when below 80% of {$IF_ERRORS_WARN} threshold'
              tags:
                - tag: scope
                  value: performance
          graph_prototypes:
            - uuid: e39ef9459ab642bd8551ebdeb0fd304c
              name: 'Interface {#IFDESCR}: Network traffic'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.in[ifInOctets.{#SNMPINDEX}]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: 2774A4
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.out[ifOutOctets.{#SNMPINDEX}]'
                - sortorder: '2'
                  color: F63100
                  yaxisside: RIGHT
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
                - sortorder: '3'
                  color: A54F10
                  yaxisside: RIGHT
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
                - sortorder: '4'
                  color: FC6EA3
                  yaxisside: RIGHT
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
                - sortorder: '5'
                  color: 6C59DC
                  yaxisside: RIGHT
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
        - uuid: aa54a60fb58e42bd9ddc02c75a2f1cbb
          name: 'Stations Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discover[{#STANAME},.1.3.6.1.4.1.41112.1.11.1.3.1.14]'
          key: radio.stations.discovery
          delay: 15m
          item_prototypes:
            - uuid: 4266a00a450f4dd0963b5cdabdd2f558
              name: 'Station {#STANAME}: Active Link'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.2.{#SNMPINDEX}'
              key: 'radio.ubntStaActiveLink[{#SNMPINDEX}]'
              history: 14d
              trends: '0'
              value_type: CHAR
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - '3600'
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
              trigger_prototypes:
                - uuid: d5b48eac5adc41838a7d8c3abaa22e09
                  expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaActiveLink[{#SNMPINDEX}])="backup"'
                  name: 'Station {#STANAME}: Running on backup link'
                  priority: AVERAGE
                  manual_close: 'YES'
                  dependencies:
                    - name: 'Station {#STANAME}: Link Recently Reconnected'
                      expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaConnTime[{#SNMPINDEX}])<600'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: 1a8cbf0c8d324e0cb12f682f8e9bb419
              name: 'Station {#STANAME}: Connection Time'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.17.{#SNMPINDEX}'
              key: 'radio.ubntStaConnTime[{#SNMPINDEX}]'
              history: 14d
              units: s
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.01'
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
              trigger_prototypes:
                - uuid: ff33b85f7a7d48e2920ad32b8e0f58d7
                  expression: 'last(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaConnTime[{#SNMPINDEX}])<600'
                  name: 'Station {#STANAME}: Link Recently Reconnected'
                  priority: INFO
                  dependencies:
                    - name: 'Station {#STANAME}: No Data Being Received'
                      expression: 'nodata(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaConnTime[{#SNMPINDEX}],120)=1'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: a3d997bd0b0c4cae8d9fdd00a6dfc11e
                  expression: 'nodata(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaConnTime[{#SNMPINDEX}],120)=1'
                  name: 'Station {#STANAME}: No Data Being Received'
                  priority: AVERAGE
                  dependencies:
                    - name: 'No SNMP data collection'
                      expression: 'max(/NCZ Ubiquiti Wave by SNMPv2/zabbix[host,snmp,available],{$SNMP_TIMEOUT})=0'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 8d350384ea7d4a0facd4d7db05755c67
              name: 'Station {#STANAME}: Distance'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.15.{#SNMPINDEX}'
              key: 'radio.ubntStaDistance[{#SNMPINDEX}]'
              history: 14d
              units: m
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - '3600'
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: 93196ebbce014cd490e1ad25aff3619f
              name: 'Station {#STANAME}: Remote RSSI'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.18.{#SNMPINDEX}'
              key: 'radio.ubntStaRemoteRSSI[{#SNMPINDEX}]'
              history: 14d
              value_type: FLOAT
              units: dBm
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: a74809f23c204746b148d0e2adca23ee
              name: 'Station {#STANAME}: Remote SNR'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.19.{#SNMPINDEX}'
              key: 'radio.ubntStaRemoteSNR[{#SNMPINDEX}]'
              history: 14d
              value_type: FLOAT
              units: dB
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: 1597e6f9ce2f4804a49590f9998a2939
              name: 'Station {#STANAME}: Local RSSI'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.3.{#SNMPINDEX}'
              key: 'radio.ubntStaRSSI[{#SNMPINDEX}]'
              history: 14d
              value_type: FLOAT
              units: dBm
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: c4401c138de944b58e468a71a4103ed5
              name: 'Station {#STANAME}: Rx Capacity'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.8.{#SNMPINDEX}'
              key: 'radio.ubntStaRxCapacity[{#SNMPINDEX}]'
              history: 14d
              units: bps
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '1000'
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: 83b1a92c2e3f4aa8bd919cbe928c488e
              name: 'Station {#STANAME}: Rx Rate'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.10.{#SNMPINDEX}'
              key: 'radio.ubntStaRxRate[{#SNMPINDEX}]'
              history: 14d
              units: bps
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '8'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: ccce0b55af774415b1556410a45dda20
              name: 'Station {#STANAME}: Local SNR'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.4.{#SNMPINDEX}'
              key: 'radio.ubntStaSNR[{#SNMPINDEX}]'
              history: 14d
              value_type: FLOAT
              units: dB
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: 2dcec301c88d4d37a421ab5dcea6ee57
              name: 'Station {#STANAME}: Tx Capacity'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.7.{#SNMPINDEX}'
              key: 'radio.ubntStaTxCapacity[{#SNMPINDEX}]'
              history: 14d
              units: bps
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '1000'
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
            - uuid: 81933977965c451eaf6b812446fb5553
              name: 'Station {#STANAME}: Tx Rate'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.41112.1.11.1.3.1.9.{#SNMPINDEX}'
              key: 'radio.ubntStaTxRate[{#SNMPINDEX}]'
              history: 14d
              units: bps
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '8'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: radio
                - tag: station
                  value: '{#STANAME}'
          trigger_prototypes:
            - uuid: c736c96f25cb452cab1e57ae9c83f5a0
              expression: '(avg(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaRxRate[{#SNMPINDEX}],360)/avg(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaRxCapacity[{#SNMPINDEX}],360))>0.8'
              name: 'Station {#STANAME}: Rx Throughput is within 80% of Capacity'
              priority: WARNING
              tags:
                - tag: scope
                  value: performance
            - uuid: f700fd079ae24b1ba98b71f7d8b77361
              expression: '(avg(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaTxRate[{#SNMPINDEX}],360)/avg(/NCZ Ubiquiti Wave by SNMPv2/radio.ubntStaTxCapacity[{#SNMPINDEX}],360))>0.8'
              name: 'Station {#STANAME}: Tx Throughput is within 80% of Capacity'
              priority: WARNING
              tags:
                - tag: scope
                  value: performance
          graph_prototypes:
            - uuid: 55aef2e425b945c681e7ffc9286f16fb
              name: 'Station {#STANAME}: Signal'
              graph_items:
                - color: FFFF00
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaSNR[{#SNMPINDEX}]'
                - sortorder: '1'
                  color: BF00FF
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaRemoteSNR[{#SNMPINDEX}]'
            - uuid: 568676ff69544faaabe5a6428a14e2d5
              name: 'Station {#STANAME}: Throughput'
              graph_items:
                - drawtype: DASHED_LINE
                  color: 80FF00
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaRxCapacity[{#SNMPINDEX}]'
                - sortorder: '1'
                  color: 388E3C
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaRxRate[{#SNMPINDEX}]'
                - sortorder: '2'
                  drawtype: DASHED_LINE
                  color: 0040FF
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaTxCapacity[{#SNMPINDEX}]'
                - sortorder: '3'
                  color: 1A237E
                  calc_fnc: ALL
                  item:
                    host: 'NCZ Ubiquiti Wave by SNMPv2'
                    key: 'radio.ubntStaTxRate[{#SNMPINDEX}]'
      tags:
        - tag: class
          value: network
        - tag: target
          value: ubiquiti
        - tag: target
          value: ubiquiti-wave
      macros:
        - macro: '{$CPU_UTIL_MAX}'
          value: '90'
        - macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        - macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
        - macro: '{$IF_ERRORS_WARN}'
          value: '2'
        - macro: '{$IF_UTIL_MAX}'
          value: '90'
        - macro: '{$MEMORY_UTIL_MAX}'
          value: '90'
        - macro: '{$ROLL_WARN}'
          value: '2'
        - macro: '{$SNMP_TIMEOUT}'
          value: 3m
        - macro: '{$TILT_WARN}'
          value: '2'
      valuemaps:
        - uuid: b0c5412e2b37434cbdfe57d2632466f3
          name: ubntRadioRole
          mappings:
            - value: '0'
              newvalue: ap
            - value: '1'
              newvalue: cpe
  graphs:
    - uuid: 4f67ec4c0b1146f4b88c2ed70aeb077f
      name: 'CPU utilization'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 1A7C11
          item:
            host: 'NCZ Ubiquiti Wave by SNMPv2'
            key: 'system.cpu.util[5m]'
    - uuid: 9e82fcb7bbed4c3ea248866eb9c04b93
      name: 'Memory utilization'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 1A7C11
          item:
            host: 'NCZ Ubiquiti Wave by SNMPv2'
            key: 'vm.memory[used]'
    - uuid: f938ada5dc164e98ae56a2ffc2a5f893
      name: 'Ping Response'
      graph_items:
        - color: 199C0D
          item:
            host: 'NCZ Ubiquiti Wave by SNMPv2'
            key: icmppingloss
        - sortorder: '1'
          color: F63100
          yaxisside: RIGHT
          item:
            host: 'NCZ Ubiquiti Wave by SNMPv2'
            key: icmppingsec
